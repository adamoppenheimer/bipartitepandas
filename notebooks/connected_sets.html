<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Connected sets &mdash; BipartitePandas 1.1.9 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Advanced features" href="advanced_features.html" />
    <link rel="prev" title="Clustering" href="clustering.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> BipartitePandas
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc-python.html">From Python</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Notebook examples</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="simple_example.html">Simple Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="formats.html">Formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_columns.html">Custom Columns</a></li>
<li class="toctree-l1"><a class="reference internal" href="clustering.html">Clustering</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Connected Sets</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Import-the-BipartitePandas-package">Import the BipartitePandas package</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Get-your-data-ready">Get your data ready</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Computing-connected-sets">Computing connected sets</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#‘connectedness’-=-None">‘connectedness’ = None</a></li>
<li class="toctree-l3"><a class="reference internal" href="#‘connectedness’-=-‘leave_out_observation’">‘connectedness’ = ‘leave_out_observation’</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Connected-sets-for-collapsed-data">Connected sets for collapsed data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Simpler-code">Simpler code</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="advanced_features.html">Advanced Features</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Under the hood</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../internal.html">Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class-bipartitedataframe.html">BipartiteDataFrame</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class-bipartitebase.html">BipartiteBase</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class-bipartitelongbase.html">BipartiteLongBase</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class-bipartitelong.html">BipartiteLong</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class-bipartitelongcollapsed.html">BipartiteLongCollapsed</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class-bipartiteeventstudybase.html">BipartiteEventStudyBase</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class-bipartiteeventstudy.html">BipartiteEventStudy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class-bipartiteeventstudycollapsed.html">BipartiteEventStudyCollapsed</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class-bipartiteextendedeventstudybase.html">BipartiteExtendedEventStudyBase</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class-bipartiteextendedeventstudy.html">BipartiteExtendedEventStudy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class-bipartiteextendedeventstudycollapsed.html">BipartiteExtendedEventStudyCollapsed</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class-simbipartite.html">SimBipartite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../module-measures.html">Measures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../module-grouping.html">Grouping</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">BipartitePandas</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Connected sets</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/notebooks/connected_sets.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt .copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
.jp-RenderedHTMLCommon table,
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
.jp-RenderedHTMLCommon thead,
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
.jp-RenderedHTMLCommon tr,
.jp-RenderedHTMLCommon th,
.jp-RenderedHTMLCommon td,
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
.jp-RenderedHTMLCommon th,
div.rendered_html th {
  font-weight: bold;
}
.jp-RenderedHTMLCommon tbody tr:nth-child(odd),
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
.jp-RenderedHTMLCommon tbody tr:hover,
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="Connected-sets">
<h1>Connected sets<a class="headerlink" href="#Connected-sets" title="Permalink to this heading"></a></h1>
<section id="Import-the-BipartitePandas-package">
<h2>Import the BipartitePandas package<a class="headerlink" href="#Import-the-BipartitePandas-package" title="Permalink to this heading"></a></h2>
<p>Make sure to install it using <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">bipartitepandas</span></code>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">bipartitepandas</span> <span class="k">as</span> <span class="nn">bpd</span>
</pre></div>
</div>
</div>
</section>
<section id="Get-your-data-ready">
<h2>Get your data ready<a class="headerlink" href="#Get-your-data-ready" title="Permalink to this heading"></a></h2>
<p>For this notebook, we simulate data (we set parameters to make the connected sets interesting).</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">bpd</span><span class="o">.</span><span class="n">SimBipartite</span><span class="p">(</span>
    <span class="n">bpd</span><span class="o">.</span><span class="n">sim_params</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s1">&#39;firm_size&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
            <span class="s1">&#39;p_move&#39;</span><span class="p">:</span> <span class="mf">0.05</span>
        <span class="p">}</span>
    <span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">simulate</span><span class="p">()</span>
<span class="n">bdf</span> <span class="o">=</span> <span class="n">bpd</span><span class="o">.</span><span class="n">BipartiteDataFrame</span><span class="p">(</span>
    <span class="n">i</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;i&#39;</span><span class="p">],</span> <span class="n">j</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;j&#39;</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">],</span> <span class="n">t</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;t&#39;</span><span class="p">]</span>
<span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">bdf</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>i</th>
      <th>j</th>
      <th>y</th>
      <th>t</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>164</td>
      <td>-1.255266</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0</td>
      <td>164</td>
      <td>0.395999</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0</td>
      <td>164</td>
      <td>-1.273443</td>
      <td>2</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0</td>
      <td>164</td>
      <td>-1.404883</td>
      <td>3</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0</td>
      <td>164</td>
      <td>-0.783187</td>
      <td>4</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>49995</th>
      <td>9999</td>
      <td>786</td>
      <td>-0.510697</td>
      <td>0</td>
    </tr>
    <tr>
      <th>49996</th>
      <td>9999</td>
      <td>786</td>
      <td>1.994076</td>
      <td>1</td>
    </tr>
    <tr>
      <th>49997</th>
      <td>9999</td>
      <td>786</td>
      <td>2.570977</td>
      <td>2</td>
    </tr>
    <tr>
      <th>49998</th>
      <td>9999</td>
      <td>786</td>
      <td>0.535605</td>
      <td>3</td>
    </tr>
    <tr>
      <th>49999</th>
      <td>9999</td>
      <td>786</td>
      <td>-0.202017</td>
      <td>4</td>
    </tr>
  </tbody>
</table>
<p>50000 rows × 4 columns</p>
</div></div>
</div>
</section>
<section id="Computing-connected-sets">
<h2>Computing connected sets<a class="headerlink" href="#Computing-connected-sets" title="Permalink to this heading"></a></h2>
<p>There are eight connectedness options:</p>
<ul class="simple">
<li><p>None</p></li>
<li><p>Connected</p></li>
<li><p>Strongly connected</p></li>
<li><p>Leave-out-observation</p></li>
<li><p>Leave-out-spell</p></li>
<li><p>Leave-out-match</p></li>
<li><p>Leave-out-worker</p></li>
<li><p>Leave-out-firm</p></li>
</ul>
<p>These are specified in the cleaning parameters dictionary under the key <code class="docutils literal notranslate"><span class="pre">'connectedness'</span></code>. We will demonstrate <code class="docutils literal notranslate"><span class="pre">'connectedness'</span> <span class="pre">=</span> <span class="pre">None</span></code> and <code class="docutils literal notranslate"><span class="pre">'connectedness'</span> <span class="pre">=</span> <span class="pre">'leave_out_observation'</span></code>.</p>
<div class="admonition note">
<p class="admonition-title fa fa-exclamation-circle">Note</p>
<p>Leave-out-spell and leave-out-match are distinguished by workers who leave a firm then return to it.</p>
</div>
<p>Note</p>
<p>Stayers who have only a single observation after computing the largest connected set can be dropped by specifying <code class="docutils literal notranslate"><span class="pre">'drop_single_stayers'</span> <span class="pre">=</span> <span class="pre">True</span></code> in your cleaning parameters dictionary.</p>
</div><div class="admonition warning">
<p class="admonition-title fa fa-exclamation-circle">Warning</p>
<p>Connectedness is not necessarily maintained between non-collapsed and collapsed formats. Therefore, if you plan to use connected, collapsed data, it is recommended to set the connectedness level at the level at which you would to collapse your data, and to set <code class="docutils literal notranslate"><span class="pre">'collapse_at_connectedness_measure'</span> <span class="pre">=</span> <span class="pre">True</span></code> in your cleaning parameters dictionary. An example is given below.</p>
</div>
<section id="‘connectedness’-=-None">
<h3>‘connectedness’ = None<a class="headerlink" href="#‘connectedness’-=-None" title="Permalink to this heading"></a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">conn_none</span> <span class="o">=</span> <span class="n">bdf</span><span class="o">.</span><span class="n">clean</span><span class="p">(</span>
    <span class="n">bpd</span><span class="o">.</span><span class="n">clean_params</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s1">&#39;connectedness&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s1">&#39;verbose&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">}</span>
    <span class="p">)</span>
<span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">conn_none</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>i</th>
      <th>j</th>
      <th>y</th>
      <th>t</th>
      <th>m</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>164</td>
      <td>-1.255266</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0</td>
      <td>164</td>
      <td>0.395999</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0</td>
      <td>164</td>
      <td>-1.273443</td>
      <td>2</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0</td>
      <td>164</td>
      <td>-1.404883</td>
      <td>3</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0</td>
      <td>164</td>
      <td>-0.783187</td>
      <td>4</td>
      <td>0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>49995</th>
      <td>9999</td>
      <td>786</td>
      <td>-0.510697</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>49996</th>
      <td>9999</td>
      <td>786</td>
      <td>1.994076</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>49997</th>
      <td>9999</td>
      <td>786</td>
      <td>2.570977</td>
      <td>2</td>
      <td>0</td>
    </tr>
    <tr>
      <th>49998</th>
      <td>9999</td>
      <td>786</td>
      <td>0.535605</td>
      <td>3</td>
      <td>0</td>
    </tr>
    <tr>
      <th>49999</th>
      <td>9999</td>
      <td>786</td>
      <td>-0.202017</td>
      <td>4</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>50000 rows × 5 columns</p>
</div></div>
</div>
</section>
<section id="‘connectedness’-=-‘leave_out_observation’">
<h3>‘connectedness’ = ‘leave_out_observation’<a class="headerlink" href="#‘connectedness’-=-‘leave_out_observation’" title="Permalink to this heading"></a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">conn_loo</span> <span class="o">=</span> <span class="n">bdf</span><span class="o">.</span><span class="n">clean</span><span class="p">(</span>
    <span class="n">bpd</span><span class="o">.</span><span class="n">clean_params</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s1">&#39;connectedness&#39;</span><span class="p">:</span> <span class="s1">&#39;leave_out_observation&#39;</span><span class="p">,</span>
            <span class="s1">&#39;verbose&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">}</span>
    <span class="p">)</span>
<span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">conn_loo</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>i</th>
      <th>j</th>
      <th>y</th>
      <th>t</th>
      <th>m</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>0</td>
      <td>-1.255266</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0</td>
      <td>0</td>
      <td>0.395999</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0</td>
      <td>0</td>
      <td>-1.273443</td>
      <td>2</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0</td>
      <td>0</td>
      <td>-1.404883</td>
      <td>3</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0</td>
      <td>0</td>
      <td>-0.783187</td>
      <td>4</td>
      <td>0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>44856</th>
      <td>9014</td>
      <td>876</td>
      <td>-0.510697</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>44857</th>
      <td>9014</td>
      <td>876</td>
      <td>1.994076</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>44858</th>
      <td>9014</td>
      <td>876</td>
      <td>2.570977</td>
      <td>2</td>
      <td>0</td>
    </tr>
    <tr>
      <th>44859</th>
      <td>9014</td>
      <td>876</td>
      <td>0.535605</td>
      <td>3</td>
      <td>0</td>
    </tr>
    <tr>
      <th>44860</th>
      <td>9014</td>
      <td>876</td>
      <td>-0.202017</td>
      <td>4</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>44861 rows × 5 columns</p>
</div></div>
</div>
</section>
<section id="Connected-sets-for-collapsed-data">
<h3>Connected sets for collapsed data<a class="headerlink" href="#Connected-sets-for-collapsed-data" title="Permalink to this heading"></a></h3>
<p>As mentioned above, connectedness is not necessarily maintained between non-collapsed and collapsed formats.</p>
<p>Here we show an example that demonstrates this, then show how setting <code class="docutils literal notranslate"><span class="pre">'collapse_at_connectedness_measure'</span> <span class="pre">=</span> <span class="pre">True</span></code> in your cleaning parameters dictionary will give the correct results, all in one line.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">coll_conn_loo_wrong</span> <span class="o">=</span> <span class="n">conn_loo</span><span class="o">.</span><span class="n">collapse</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="s1">&#39;spell&#39;</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">coll_conn_loo_wrong</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>i</th>
      <th>j</th>
      <th>y</th>
      <th>t1</th>
      <th>t2</th>
      <th>w</th>
      <th>m</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>0</td>
      <td>-0.864156</td>
      <td>0</td>
      <td>4</td>
      <td>5</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>1</td>
      <td>-2.076316</td>
      <td>0</td>
      <td>4</td>
      <td>5</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>2</td>
      <td>-0.360893</td>
      <td>0</td>
      <td>4</td>
      <td>5</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>3</td>
      <td>-1.256533</td>
      <td>0</td>
      <td>4</td>
      <td>5</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>4</td>
      <td>1.233623</td>
      <td>1</td>
      <td>4</td>
      <td>4</td>
      <td>0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>10891</th>
      <td>9011</td>
      <td>697</td>
      <td>0.423780</td>
      <td>0</td>
      <td>4</td>
      <td>5</td>
      <td>0</td>
    </tr>
    <tr>
      <th>10892</th>
      <td>9012</td>
      <td>476</td>
      <td>0.385739</td>
      <td>0</td>
      <td>4</td>
      <td>5</td>
      <td>0</td>
    </tr>
    <tr>
      <th>10893</th>
      <td>9013</td>
      <td>796</td>
      <td>1.546216</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>10894</th>
      <td>9013</td>
      <td>381</td>
      <td>-0.333299</td>
      <td>1</td>
      <td>4</td>
      <td>4</td>
      <td>1</td>
    </tr>
    <tr>
      <th>10895</th>
      <td>9014</td>
      <td>876</td>
      <td>0.877589</td>
      <td>0</td>
      <td>4</td>
      <td>5</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>10896 rows × 7 columns</p>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">coll_conn_loo_right_1</span> <span class="o">=</span> <span class="n">bdf</span><span class="o">.</span><span class="n">clean</span><span class="p">(</span>
    <span class="n">bpd</span><span class="o">.</span><span class="n">clean_params</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s1">&#39;connectedness&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s1">&#39;verbose&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">}</span>
    <span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">collapse</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="s1">&#39;spell&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">clean</span><span class="p">(</span>
    <span class="n">bpd</span><span class="o">.</span><span class="n">clean_params</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s1">&#39;connectedness&#39;</span><span class="p">:</span> <span class="s1">&#39;leave_out_observation&#39;</span><span class="p">,</span>
            <span class="s1">&#39;verbose&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">}</span>
    <span class="p">)</span>
<span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">coll_conn_loo_right_1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>i</th>
      <th>j</th>
      <th>y</th>
      <th>t1</th>
      <th>t2</th>
      <th>w</th>
      <th>m</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>0</td>
      <td>-0.864156</td>
      <td>0</td>
      <td>4</td>
      <td>5.0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>1</td>
      <td>-2.076316</td>
      <td>0</td>
      <td>4</td>
      <td>5.0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>2</td>
      <td>-0.360893</td>
      <td>0</td>
      <td>4</td>
      <td>5.0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>3</td>
      <td>-1.256533</td>
      <td>0</td>
      <td>4</td>
      <td>5.0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>4</td>
      <td>1.233623</td>
      <td>1</td>
      <td>4</td>
      <td>4.0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>10878</th>
      <td>8999</td>
      <td>696</td>
      <td>0.423780</td>
      <td>0</td>
      <td>4</td>
      <td>5.0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>10879</th>
      <td>9000</td>
      <td>475</td>
      <td>0.385739</td>
      <td>0</td>
      <td>4</td>
      <td>5.0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>10880</th>
      <td>9001</td>
      <td>795</td>
      <td>1.546216</td>
      <td>0</td>
      <td>0</td>
      <td>1.0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>10881</th>
      <td>9001</td>
      <td>380</td>
      <td>-0.333299</td>
      <td>1</td>
      <td>4</td>
      <td>4.0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>10882</th>
      <td>9002</td>
      <td>875</td>
      <td>0.877589</td>
      <td>0</td>
      <td>4</td>
      <td>5.0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>10883 rows × 7 columns</p>
</div></div>
</div>
</section>
<section id="Simpler-code">
<h3>Simpler code<a class="headerlink" href="#Simpler-code" title="Permalink to this heading"></a></h3>
<p>Instead of cleaning, collapsing, then cleaning again, we can do it all at once by specifying <code class="docutils literal notranslate"><span class="pre">'connectedness'</span> <span class="pre">=</span> <span class="pre">'leave_out_spell'</span></code> (or <code class="docutils literal notranslate"><span class="pre">'leave_out_match'</span></code>) and <code class="docutils literal notranslate"><span class="pre">'collapse_at_connectedness_measure'</span> <span class="pre">=</span> <span class="pre">True</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">coll_conn_loo_right_2</span> <span class="o">=</span> <span class="n">bdf</span><span class="o">.</span><span class="n">clean</span><span class="p">(</span>
    <span class="n">bpd</span><span class="o">.</span><span class="n">clean_params</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s1">&#39;connectedness&#39;</span><span class="p">:</span> <span class="s1">&#39;leave_out_spell&#39;</span><span class="p">,</span>
            <span class="s1">&#39;collapse_at_connectedness_measure&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;verbose&#39;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">}</span>
    <span class="p">)</span>
<span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">coll_conn_loo_right_2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>i</th>
      <th>j</th>
      <th>y</th>
      <th>t1</th>
      <th>t2</th>
      <th>w</th>
      <th>m</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>0</td>
      <td>-0.864156</td>
      <td>0</td>
      <td>4</td>
      <td>5</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>1</td>
      <td>-2.076316</td>
      <td>0</td>
      <td>4</td>
      <td>5</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>2</td>
      <td>-0.360893</td>
      <td>0</td>
      <td>4</td>
      <td>5</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>3</td>
      <td>-1.256533</td>
      <td>0</td>
      <td>4</td>
      <td>5</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>4</td>
      <td>1.233623</td>
      <td>1</td>
      <td>4</td>
      <td>4</td>
      <td>0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>10878</th>
      <td>8999</td>
      <td>696</td>
      <td>0.423780</td>
      <td>0</td>
      <td>4</td>
      <td>5</td>
      <td>0</td>
    </tr>
    <tr>
      <th>10879</th>
      <td>9000</td>
      <td>475</td>
      <td>0.385739</td>
      <td>0</td>
      <td>4</td>
      <td>5</td>
      <td>0</td>
    </tr>
    <tr>
      <th>10880</th>
      <td>9001</td>
      <td>795</td>
      <td>1.546216</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>10881</th>
      <td>9001</td>
      <td>380</td>
      <td>-0.333299</td>
      <td>1</td>
      <td>4</td>
      <td>4</td>
      <td>1</td>
    </tr>
    <tr>
      <th>10882</th>
      <td>9002</td>
      <td>875</td>
      <td>0.877589</td>
      <td>0</td>
      <td>4</td>
      <td>5</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>10883 rows × 7 columns</p>
</div></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="clustering.html" class="btn btn-neutral float-left" title="Clustering" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="advanced_features.html" class="btn btn-neutral float-right" title="Advanced features" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Thibaut Lamadon.
      <span class="lastupdated">Last updated on Jul 24, 2023.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
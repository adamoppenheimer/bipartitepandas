<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Custom columns &mdash; BipartitePandas 1.1.9 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Clustering" href="clustering.html" />
    <link rel="prev" title="Formats" href="formats.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> BipartitePandas
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc-python.html">From Python</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Notebook examples</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="simple_example.html">Simple Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="formats.html">Formats</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Custom Columns</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Why-do-we-care?">Why do we care?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Import-the-BipartitePandas-package">Import the BipartitePandas package</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Get-your-data-ready">Get your data ready</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Columns">Columns</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Required">Required</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Optional">Optional</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#Formats">Formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Constructing-DataFrames">Constructing DataFrames</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Categorical-columns">Categorical columns</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Collapsing-data">Collapsing data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Converting-between-(collapsed)-long-and-(collapsed)-event-study-formats">Converting between (collapsed) long and (collapsed) event study formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Adding-custom-columns-to-an-instantiated-DataFrame">Adding custom columns to an instantiated DataFrame</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="clustering.html">Clustering</a></li>
<li class="toctree-l1"><a class="reference internal" href="connected_sets.html">Connected Sets</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_features.html">Advanced Features</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Under the hood</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../internal.html">Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class-bipartitedataframe.html">BipartiteDataFrame</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class-bipartitebase.html">BipartiteBase</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class-bipartitelongbase.html">BipartiteLongBase</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class-bipartitelong.html">BipartiteLong</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class-bipartitelongcollapsed.html">BipartiteLongCollapsed</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class-bipartiteeventstudybase.html">BipartiteEventStudyBase</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class-bipartiteeventstudy.html">BipartiteEventStudy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class-bipartiteeventstudycollapsed.html">BipartiteEventStudyCollapsed</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class-bipartiteextendedeventstudybase.html">BipartiteExtendedEventStudyBase</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class-bipartiteextendedeventstudy.html">BipartiteExtendedEventStudy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class-bipartiteextendedeventstudycollapsed.html">BipartiteExtendedEventStudyCollapsed</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class-simbipartite.html">SimBipartite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../module-measures.html">Measures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../module-grouping.html">Grouping</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">BipartitePandas</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Custom columns</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/notebooks/custom_columns.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt .copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
.jp-RenderedHTMLCommon table,
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
.jp-RenderedHTMLCommon thead,
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
.jp-RenderedHTMLCommon tr,
.jp-RenderedHTMLCommon th,
.jp-RenderedHTMLCommon td,
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
.jp-RenderedHTMLCommon th,
div.rendered_html th {
  font-weight: bold;
}
.jp-RenderedHTMLCommon tbody tr:nth-child(odd),
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
.jp-RenderedHTMLCommon tbody tr:hover,
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="Custom-columns">
<h1>Custom columns<a class="headerlink" href="#Custom-columns" title="Permalink to this heading"></a></h1>
<section id="Why-do-we-care?">
<h2>Why do we care?<a class="headerlink" href="#Why-do-we-care?" title="Permalink to this heading"></a></h2>
<p>Specifying custom columns correctly in <code class="docutils literal notranslate"><span class="pre">BipartitePandas</span></code> is very important. This ensures custom columns interact with classes and methods properly - otherwise, conversions between types are likely to drop these columns, and method calls may not apply to these columns, they may apply incorrectly, or they may raise errors.</p>
</section>
<section id="Import-the-BipartitePandas-package">
<h2>Import the BipartitePandas package<a class="headerlink" href="#Import-the-BipartitePandas-package" title="Permalink to this heading"></a></h2>
<p>Make sure to install it using <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">bipartitepandas</span></code>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">bipartitepandas</span> <span class="k">as</span> <span class="nn">bpd</span>
</pre></div>
</div>
</div>
</section>
<section id="Get-your-data-ready">
<h2>Get your data ready<a class="headerlink" href="#Get-your-data-ready" title="Permalink to this heading"></a></h2>
<p>For this notebook, we simulate data.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">bpd</span><span class="o">.</span><span class="n">SimBipartite</span><span class="p">()</span><span class="o">.</span><span class="n">simulate</span><span class="p">()</span>
<span class="n">display</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>i</th>
      <th>j</th>
      <th>y</th>
      <th>t</th>
      <th>l</th>
      <th>k</th>
      <th>alpha</th>
      <th>psi</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>36</td>
      <td>-1.569165</td>
      <td>0</td>
      <td>2</td>
      <td>1</td>
      <td>0.000000</td>
      <td>-0.908458</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0</td>
      <td>17</td>
      <td>2.442324</td>
      <td>1</td>
      <td>2</td>
      <td>0</td>
      <td>0.000000</td>
      <td>-1.335178</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0</td>
      <td>17</td>
      <td>-1.307551</td>
      <td>2</td>
      <td>2</td>
      <td>0</td>
      <td>0.000000</td>
      <td>-1.335178</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0</td>
      <td>17</td>
      <td>-1.551354</td>
      <td>3</td>
      <td>2</td>
      <td>0</td>
      <td>0.000000</td>
      <td>-1.335178</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0</td>
      <td>13</td>
      <td>-0.789661</td>
      <td>4</td>
      <td>2</td>
      <td>0</td>
      <td>0.000000</td>
      <td>-1.335178</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>49995</th>
      <td>9999</td>
      <td>102</td>
      <td>-1.493225</td>
      <td>0</td>
      <td>1</td>
      <td>5</td>
      <td>-0.430727</td>
      <td>0.114185</td>
    </tr>
    <tr>
      <th>49996</th>
      <td>9999</td>
      <td>116</td>
      <td>2.368321</td>
      <td>1</td>
      <td>1</td>
      <td>5</td>
      <td>-0.430727</td>
      <td>0.114185</td>
    </tr>
    <tr>
      <th>49997</th>
      <td>9999</td>
      <td>76</td>
      <td>-2.070787</td>
      <td>2</td>
      <td>1</td>
      <td>3</td>
      <td>-0.430727</td>
      <td>-0.348756</td>
    </tr>
    <tr>
      <th>49998</th>
      <td>9999</td>
      <td>23</td>
      <td>-1.203733</td>
      <td>3</td>
      <td>1</td>
      <td>1</td>
      <td>-0.430727</td>
      <td>-0.908458</td>
    </tr>
    <tr>
      <th>49999</th>
      <td>9999</td>
      <td>23</td>
      <td>0.132797</td>
      <td>4</td>
      <td>1</td>
      <td>1</td>
      <td>-0.430727</td>
      <td>-0.908458</td>
    </tr>
  </tbody>
</table>
<p>50000 rows × 8 columns</p>
</div></div>
</div>
</section>
<section id="Columns">
<h2>Columns<a class="headerlink" href="#Columns" title="Permalink to this heading"></a></h2>
<p>BipartitePandas includes seven pre-defined general columns:</p>
<section id="Required">
<h3>Required<a class="headerlink" href="#Required" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">i</span></code>: worker id (any type)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">j</span></code>: firm id (any type)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">y</span></code>: income (float or int)</p></li>
</ul>
</section>
<section id="Optional">
<h3>Optional<a class="headerlink" href="#Optional" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">t</span></code>: time (int)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">g</span></code>: firm type (any type)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">w</span></code>: weight (float or int)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m</span></code>: move indicator (int)</p></li>
</ul>
</section>
</section>
<section id="Formats">
<h2>Formats<a class="headerlink" href="#Formats" title="Permalink to this heading"></a></h2>
<p>BipartitePandas includes four formats:</p>
<ul class="simple">
<li><p><em>Long</em> - each row gives a single observation</p></li>
<li><p><em>Collapsed Long</em> - like <em>Long</em>, but employment spells at the same firm are collapsed into a single observation</p></li>
<li><p><em>Event Study</em> - each row gives two consecutive observations</p></li>
<li><p><em>Collapsed Event Study</em> - like <em>Event Study</em>, but employment spells at the same firm are collapsed into a single observation</p></li>
</ul>
<p>These formats divide general columns differently:</p>
<ul class="simple">
<li><p><em>Long</em> - <code class="docutils literal notranslate"><span class="pre">i</span></code>, <code class="docutils literal notranslate"><span class="pre">j</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code>, <code class="docutils literal notranslate"><span class="pre">g</span></code>, <code class="docutils literal notranslate"><span class="pre">w</span></code>, <code class="docutils literal notranslate"><span class="pre">m</span></code></p></li>
<li><p><em>Collapsed Long</em> - <code class="docutils literal notranslate"><span class="pre">i</span></code>, <code class="docutils literal notranslate"><span class="pre">j</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span></code>, <code class="docutils literal notranslate"><span class="pre">t1</span></code>, <code class="docutils literal notranslate"><span class="pre">t2</span></code>, <code class="docutils literal notranslate"><span class="pre">g</span></code>, <code class="docutils literal notranslate"><span class="pre">w</span></code>, <code class="docutils literal notranslate"><span class="pre">m</span></code></p></li>
<li><p><em>Event Study</em> - <code class="docutils literal notranslate"><span class="pre">i</span></code>, <code class="docutils literal notranslate"><span class="pre">j1</span></code>, <code class="docutils literal notranslate"><span class="pre">j2</span></code>, <code class="docutils literal notranslate"><span class="pre">y1</span></code>, <code class="docutils literal notranslate"><span class="pre">y2</span></code>, <code class="docutils literal notranslate"><span class="pre">t1</span></code>, <code class="docutils literal notranslate"><span class="pre">t2</span></code>, <code class="docutils literal notranslate"><span class="pre">g1</span></code>, <code class="docutils literal notranslate"><span class="pre">g2</span></code>, <code class="docutils literal notranslate"><span class="pre">w1</span></code>, <code class="docutils literal notranslate"><span class="pre">w2</span></code>, <code class="docutils literal notranslate"><span class="pre">m</span></code></p></li>
<li><p><em>Collapsed Event Study</em> - <code class="docutils literal notranslate"><span class="pre">i</span></code>, <code class="docutils literal notranslate"><span class="pre">j1</span></code>, <code class="docutils literal notranslate"><span class="pre">j2</span></code>, <code class="docutils literal notranslate"><span class="pre">y1</span></code>, <code class="docutils literal notranslate"><span class="pre">y2</span></code>, <code class="docutils literal notranslate"><span class="pre">t11</span></code>, <code class="docutils literal notranslate"><span class="pre">t12</span></code>, <code class="docutils literal notranslate"><span class="pre">t21</span></code>, <code class="docutils literal notranslate"><span class="pre">t22</span></code>, <code class="docutils literal notranslate"><span class="pre">g1</span></code>, <code class="docutils literal notranslate"><span class="pre">g2</span></code>, <code class="docutils literal notranslate"><span class="pre">w1</span></code>, <code class="docutils literal notranslate"><span class="pre">w2</span></code>, <code class="docutils literal notranslate"><span class="pre">m</span></code></p></li>
</ul>
</section>
<section id="Constructing-DataFrames">
<h2>Constructing DataFrames<a class="headerlink" href="#Constructing-DataFrames" title="Permalink to this heading"></a></h2>
<p>Our simulated data is in <em>Long</em> format, but includes columns that aren’t pre-defined. How do we construct a <em>Long</em> dataframe that includes these columns?</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bdf_long</span> <span class="o">=</span> <span class="n">bpd</span><span class="o">.</span><span class="n">BipartiteDataFrame</span><span class="p">(</span>
    <span class="n">i</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;i&#39;</span><span class="p">],</span> <span class="n">j</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;j&#39;</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">],</span> <span class="n">t</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;t&#39;</span><span class="p">],</span>
    <span class="n">l</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;l&#39;</span><span class="p">],</span> <span class="n">k</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;k&#39;</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;alpha&#39;</span><span class="p">],</span> <span class="n">psi</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;psi&#39;</span><span class="p">]</span>
<span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">bdf_long</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>i</th>
      <th>j</th>
      <th>y</th>
      <th>t</th>
      <th>alpha</th>
      <th>k</th>
      <th>l</th>
      <th>psi</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>36</td>
      <td>-1.569165</td>
      <td>0</td>
      <td>0.000000</td>
      <td>1</td>
      <td>2</td>
      <td>-0.908458</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0</td>
      <td>17</td>
      <td>2.442324</td>
      <td>1</td>
      <td>0.000000</td>
      <td>0</td>
      <td>2</td>
      <td>-1.335178</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0</td>
      <td>17</td>
      <td>-1.307551</td>
      <td>2</td>
      <td>0.000000</td>
      <td>0</td>
      <td>2</td>
      <td>-1.335178</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0</td>
      <td>17</td>
      <td>-1.551354</td>
      <td>3</td>
      <td>0.000000</td>
      <td>0</td>
      <td>2</td>
      <td>-1.335178</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0</td>
      <td>13</td>
      <td>-0.789661</td>
      <td>4</td>
      <td>0.000000</td>
      <td>0</td>
      <td>2</td>
      <td>-1.335178</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>49995</th>
      <td>9999</td>
      <td>102</td>
      <td>-1.493225</td>
      <td>0</td>
      <td>-0.430727</td>
      <td>5</td>
      <td>1</td>
      <td>0.114185</td>
    </tr>
    <tr>
      <th>49996</th>
      <td>9999</td>
      <td>116</td>
      <td>2.368321</td>
      <td>1</td>
      <td>-0.430727</td>
      <td>5</td>
      <td>1</td>
      <td>0.114185</td>
    </tr>
    <tr>
      <th>49997</th>
      <td>9999</td>
      <td>76</td>
      <td>-2.070787</td>
      <td>2</td>
      <td>-0.430727</td>
      <td>3</td>
      <td>1</td>
      <td>-0.348756</td>
    </tr>
    <tr>
      <th>49998</th>
      <td>9999</td>
      <td>23</td>
      <td>-1.203733</td>
      <td>3</td>
      <td>-0.430727</td>
      <td>1</td>
      <td>1</td>
      <td>-0.908458</td>
    </tr>
    <tr>
      <th>49999</th>
      <td>9999</td>
      <td>23</td>
      <td>0.132797</td>
      <td>4</td>
      <td>-0.430727</td>
      <td>1</td>
      <td>1</td>
      <td>-0.908458</td>
    </tr>
  </tbody>
</table>
<p>50000 rows × 8 columns</p>
</div></div>
</div>
<p>Are we sure this is long? Let’s check the datatype:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">bdf_long</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
bipartitepandas.bipartitelong.BipartiteLong
</pre></div></div>
</div>
</section>
<section id="Categorical-columns">
<h2>Categorical columns<a class="headerlink" href="#Categorical-columns" title="Permalink to this heading"></a></h2>
<p>What if we want to specify a column should be categorical? Then we should specify <code class="docutils literal notranslate"><span class="pre">custom_categorical_dict</span></code>!</p>
<div class="admonition note">
<p class="admonition-title fa fa-exclamation-circle">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">alpha</span></code> is float, and BipartiteDataFrame automatically sets floats to collapse by <code class="docutils literal notranslate"><span class="pre">mean</span></code>. Categorical columns cannot be collapsed by mean, so if we mark <code class="docutils literal notranslate"><span class="pre">alpha</span></code> as categorical, we must also specify that it should collapse by <code class="docutils literal notranslate"><span class="pre">first</span></code> (<code class="docutils literal notranslate"><span class="pre">last</span></code> or <code class="docutils literal notranslate"><span class="pre">None</span></code> also work). In addition, categorical columns must use the datatype <code class="docutils literal notranslate"><span class="pre">'categorical'</span></code>.</p>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bdf_long</span> <span class="o">=</span> <span class="n">bpd</span><span class="o">.</span><span class="n">BipartiteDataFrame</span><span class="p">(</span>
    <span class="n">i</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;i&#39;</span><span class="p">],</span> <span class="n">j</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;j&#39;</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">],</span> <span class="n">t</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;t&#39;</span><span class="p">],</span>
    <span class="n">l</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;l&#39;</span><span class="p">],</span> <span class="n">k</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;k&#39;</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;alpha&#39;</span><span class="p">],</span> <span class="n">psi</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;psi&#39;</span><span class="p">],</span>
    <span class="n">custom_categorical_dict</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;alpha&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
    <span class="n">custom_dtype_dict</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;alpha&#39;</span><span class="p">:</span> <span class="s1">&#39;categorical&#39;</span><span class="p">},</span>
    <span class="n">custom_how_collapse_dict</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;alpha&#39;</span><span class="p">:</span> <span class="s1">&#39;first&#39;</span><span class="p">}</span>
<span class="p">)</span><span class="o">.</span><span class="n">clean</span><span class="p">()</span>
<span class="n">display</span><span class="p">(</span><span class="n">bdf_long</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
checking required columns and datatypes
sorting rows
dropping NaN observations
generating &#39;m&#39; column
keeping highest paying job for i-t (worker-year) duplicates (how=&#39;max&#39;)
dropping workers who leave a firm then return to it (how=False)
making &#39;i&#39; ids contiguous
making &#39;j&#39; ids contiguous
making &#39;alpha&#39; ids contiguous
computing largest connected set (how=None)
sorting columns
resetting index
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>i</th>
      <th>j</th>
      <th>y</th>
      <th>t</th>
      <th>m</th>
      <th>alpha</th>
      <th>k</th>
      <th>l</th>
      <th>psi</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>36</td>
      <td>-1.569165</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>2</td>
      <td>-0.908458</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0</td>
      <td>17</td>
      <td>2.442324</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>-1.335178</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0</td>
      <td>17</td>
      <td>-1.307551</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>-1.335178</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0</td>
      <td>17</td>
      <td>-1.551354</td>
      <td>3</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>-1.335178</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0</td>
      <td>13</td>
      <td>-0.789661</td>
      <td>4</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>-1.335178</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>49995</th>
      <td>9999</td>
      <td>102</td>
      <td>-1.493225</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>5</td>
      <td>1</td>
      <td>0.114185</td>
    </tr>
    <tr>
      <th>49996</th>
      <td>9999</td>
      <td>116</td>
      <td>2.368321</td>
      <td>1</td>
      <td>2</td>
      <td>1</td>
      <td>5</td>
      <td>1</td>
      <td>0.114185</td>
    </tr>
    <tr>
      <th>49997</th>
      <td>9999</td>
      <td>76</td>
      <td>-2.070787</td>
      <td>2</td>
      <td>2</td>
      <td>1</td>
      <td>3</td>
      <td>1</td>
      <td>-0.348756</td>
    </tr>
    <tr>
      <th>49998</th>
      <td>9999</td>
      <td>23</td>
      <td>-1.203733</td>
      <td>3</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>-0.908458</td>
    </tr>
    <tr>
      <th>49999</th>
      <td>9999</td>
      <td>23</td>
      <td>0.132797</td>
      <td>4</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>-0.908458</td>
    </tr>
  </tbody>
</table>
<p>50000 rows × 9 columns</p>
</div></div>
</div>
</section>
<section id="Collapsing-data">
<h2>Collapsing data<a class="headerlink" href="#Collapsing-data" title="Permalink to this heading"></a></h2>
<p>What if instead of collapsing by the <code class="docutils literal notranslate"><span class="pre">mean</span></code>, we want a column to collapse by <code class="docutils literal notranslate"><span class="pre">first</span></code>, or even to drop when we collapse? Then we should specify <code class="docutils literal notranslate"><span class="pre">custom_how_collapse_dict</span></code>!</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bdf_long</span> <span class="o">=</span> <span class="n">bpd</span><span class="o">.</span><span class="n">BipartiteDataFrame</span><span class="p">(</span>
    <span class="n">i</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;i&#39;</span><span class="p">],</span> <span class="n">j</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;j&#39;</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">],</span> <span class="n">t</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;t&#39;</span><span class="p">],</span>
    <span class="n">l</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;l&#39;</span><span class="p">],</span> <span class="n">k</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;k&#39;</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;alpha&#39;</span><span class="p">],</span> <span class="n">psi</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;psi&#39;</span><span class="p">],</span>
    <span class="n">custom_how_collapse_dict</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;alpha&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;psi&#39;</span><span class="p">:</span> <span class="s1">&#39;first&#39;</span><span class="p">}</span>
<span class="p">)</span><span class="o">.</span><span class="n">clean</span><span class="p">()</span><span class="o">.</span><span class="n">collapse</span><span class="p">()</span>
<span class="n">display</span><span class="p">(</span><span class="n">bdf_long</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
checking required columns and datatypes
sorting rows
dropping NaN observations
generating &#39;m&#39; column
keeping highest paying job for i-t (worker-year) duplicates (how=&#39;max&#39;)
dropping workers who leave a firm then return to it (how=False)
making &#39;i&#39; ids contiguous
making &#39;j&#39; ids contiguous
computing largest connected set (how=None)
sorting columns
resetting index
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>i</th>
      <th>j</th>
      <th>y</th>
      <th>t1</th>
      <th>t2</th>
      <th>w</th>
      <th>m</th>
      <th>k</th>
      <th>l</th>
      <th>psi</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>36</td>
      <td>-1.569165</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>1.0</td>
      <td>2.0</td>
      <td>-0.908458</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0</td>
      <td>17</td>
      <td>-0.138861</td>
      <td>1</td>
      <td>3</td>
      <td>3</td>
      <td>2</td>
      <td>0.0</td>
      <td>2.0</td>
      <td>-1.335178</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0</td>
      <td>13</td>
      <td>-0.789661</td>
      <td>4</td>
      <td>4</td>
      <td>1</td>
      <td>1</td>
      <td>0.0</td>
      <td>2.0</td>
      <td>-1.335178</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1</td>
      <td>52</td>
      <td>-0.653218</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>2.0</td>
      <td>1.0</td>
      <td>-0.604585</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1</td>
      <td>49</td>
      <td>0.676861</td>
      <td>1</td>
      <td>2</td>
      <td>2</td>
      <td>2</td>
      <td>2.0</td>
      <td>1.0</td>
      <td>-0.604585</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>29820</th>
      <td>9998</td>
      <td>52</td>
      <td>-2.618451</td>
      <td>4</td>
      <td>4</td>
      <td>1</td>
      <td>1</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>-0.604585</td>
    </tr>
    <tr>
      <th>29821</th>
      <td>9999</td>
      <td>102</td>
      <td>-1.493225</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>5.0</td>
      <td>1.0</td>
      <td>0.114185</td>
    </tr>
    <tr>
      <th>29822</th>
      <td>9999</td>
      <td>116</td>
      <td>2.368321</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>2</td>
      <td>5.0</td>
      <td>1.0</td>
      <td>0.114185</td>
    </tr>
    <tr>
      <th>29823</th>
      <td>9999</td>
      <td>76</td>
      <td>-2.070787</td>
      <td>2</td>
      <td>2</td>
      <td>1</td>
      <td>2</td>
      <td>3.0</td>
      <td>1.0</td>
      <td>-0.348756</td>
    </tr>
    <tr>
      <th>29824</th>
      <td>9999</td>
      <td>23</td>
      <td>-0.535468</td>
      <td>3</td>
      <td>4</td>
      <td>2</td>
      <td>1</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>-0.908458</td>
    </tr>
  </tbody>
</table>
<p>29825 rows × 10 columns</p>
</div></div>
</div>
<div class="admonition warning">
<p class="admonition-title fa fa-exclamation-circle">Warning</p>
<p>Collapsing by <code class="docutils literal notranslate"><span class="pre">first</span></code>, <code class="docutils literal notranslate"><span class="pre">last</span></code>, <code class="docutils literal notranslate"><span class="pre">mean</span></code>, and <code class="docutils literal notranslate"><span class="pre">sum</span></code> will uncollapse correctly (although information may be lost); any other option (e.g. <code class="docutils literal notranslate"><span class="pre">var</span></code> or <code class="docutils literal notranslate"><span class="pre">std</span></code>) is not guaranteed to uncollapse correctly.</p>
</div>
</section>
<section id="Converting-between-(collapsed)-long-and-(collapsed)-event-study-formats">
<h2>Converting between (collapsed) long and (collapsed) event study formats<a class="headerlink" href="#Converting-between-(collapsed)-long-and-(collapsed)-event-study-formats" title="Permalink to this heading"></a></h2>
<p>What if we don’t want a column to split when converting to event study, or if we want it to drop during the conversion? Then we should specify <code class="docutils literal notranslate"><span class="pre">custom_long_es_split_dict</span></code>!</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bdf_long</span> <span class="o">=</span> <span class="n">bpd</span><span class="o">.</span><span class="n">BipartiteDataFrame</span><span class="p">(</span>
    <span class="n">i</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;i&#39;</span><span class="p">],</span> <span class="n">j</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;j&#39;</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">],</span> <span class="n">t</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;t&#39;</span><span class="p">],</span>
    <span class="n">l</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;l&#39;</span><span class="p">],</span> <span class="n">k</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;k&#39;</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;alpha&#39;</span><span class="p">],</span> <span class="n">psi</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;psi&#39;</span><span class="p">],</span>
    <span class="n">custom_long_es_split_dict</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;alpha&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;psi&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">}</span>
<span class="p">)</span><span class="o">.</span><span class="n">clean</span><span class="p">()</span><span class="o">.</span><span class="n">to_eventstudy</span><span class="p">()</span>
<span class="n">display</span><span class="p">(</span><span class="n">bdf_long</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
checking required columns and datatypes
sorting rows
dropping NaN observations
generating &#39;m&#39; column
keeping highest paying job for i-t (worker-year) duplicates (how=&#39;max&#39;)
dropping workers who leave a firm then return to it (how=False)
making &#39;i&#39; ids contiguous
making &#39;j&#39; ids contiguous
computing largest connected set (how=None)
sorting columns
resetting index
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>i</th>
      <th>j1</th>
      <th>j2</th>
      <th>y1</th>
      <th>y2</th>
      <th>t1</th>
      <th>t2</th>
      <th>m</th>
      <th>alpha</th>
      <th>k1</th>
      <th>k2</th>
      <th>l1</th>
      <th>l2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>36</td>
      <td>17</td>
      <td>-1.569165</td>
      <td>2.442324</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>0.000000</td>
      <td>1</td>
      <td>0</td>
      <td>2</td>
      <td>2</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0</td>
      <td>17</td>
      <td>17</td>
      <td>2.442324</td>
      <td>-1.307551</td>
      <td>1</td>
      <td>2</td>
      <td>0</td>
      <td>0.000000</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>2</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0</td>
      <td>17</td>
      <td>17</td>
      <td>-1.307551</td>
      <td>-1.551354</td>
      <td>2</td>
      <td>3</td>
      <td>0</td>
      <td>0.000000</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>2</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0</td>
      <td>17</td>
      <td>13</td>
      <td>-1.551354</td>
      <td>-0.789661</td>
      <td>3</td>
      <td>4</td>
      <td>1</td>
      <td>0.000000</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>2</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1</td>
      <td>52</td>
      <td>49</td>
      <td>-0.653218</td>
      <td>1.597527</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>-0.430727</td>
      <td>2</td>
      <td>2</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>40657</th>
      <td>9998</td>
      <td>2</td>
      <td>52</td>
      <td>-2.069815</td>
      <td>-2.618451</td>
      <td>3</td>
      <td>4</td>
      <td>1</td>
      <td>-0.967422</td>
      <td>0</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>40658</th>
      <td>9999</td>
      <td>102</td>
      <td>116</td>
      <td>-1.493225</td>
      <td>2.368321</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>-0.430727</td>
      <td>5</td>
      <td>5</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>40659</th>
      <td>9999</td>
      <td>116</td>
      <td>76</td>
      <td>2.368321</td>
      <td>-2.070787</td>
      <td>1</td>
      <td>2</td>
      <td>1</td>
      <td>-0.430727</td>
      <td>5</td>
      <td>3</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>40660</th>
      <td>9999</td>
      <td>76</td>
      <td>23</td>
      <td>-2.070787</td>
      <td>-1.203733</td>
      <td>2</td>
      <td>3</td>
      <td>1</td>
      <td>-0.430727</td>
      <td>3</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>40661</th>
      <td>9999</td>
      <td>23</td>
      <td>23</td>
      <td>-1.203733</td>
      <td>0.132797</td>
      <td>3</td>
      <td>4</td>
      <td>0</td>
      <td>-0.430727</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
<p>40662 rows × 13 columns</p>
</div></div>
</div>
</section>
<section id="Adding-custom-columns-to-an-instantiated-DataFrame">
<h2>Adding custom columns to an instantiated DataFrame<a class="headerlink" href="#Adding-custom-columns-to-an-instantiated-DataFrame" title="Permalink to this heading"></a></h2>
<p>Use the method <code class="docutils literal notranslate"><span class="pre">.add_column()</span></code> to add custom columns to a DataFrame that has already been instantiated.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bdf_long</span> <span class="o">=</span> <span class="n">bpd</span><span class="o">.</span><span class="n">BipartiteDataFrame</span><span class="p">(</span>
    <span class="n">i</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;i&#39;</span><span class="p">],</span> <span class="n">j</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;j&#39;</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">],</span> <span class="n">t</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;t&#39;</span><span class="p">],</span>
    <span class="n">l</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;l&#39;</span><span class="p">],</span> <span class="n">k</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;k&#39;</span><span class="p">]</span>
<span class="p">)</span>
<span class="n">bdf_long</span> <span class="o">=</span> <span class="n">bdf_long</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s1">&#39;alpha&#39;</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;alpha&#39;</span><span class="p">],</span> <span class="n">is_categorical</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;categorical&#39;</span><span class="p">)</span>
<span class="n">bdf_long</span> <span class="o">=</span> <span class="n">bdf_long</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s1">&#39;psi&#39;</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;psi&#39;</span><span class="p">],</span> <span class="n">is_categorical</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;categorical&#39;</span><span class="p">)</span>
<span class="n">bdf_long</span> <span class="o">=</span> <span class="n">bdf_long</span><span class="o">.</span><span class="n">clean</span><span class="p">()</span>
<span class="n">display</span><span class="p">(</span><span class="n">bdf_long</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
checking required columns and datatypes
sorting rows
dropping NaN observations
generating &#39;m&#39; column
keeping highest paying job for i-t (worker-year) duplicates (how=&#39;max&#39;)
dropping workers who leave a firm then return to it (how=False)
making &#39;i&#39; ids contiguous
making &#39;j&#39; ids contiguous
making &#39;alpha&#39; ids contiguous
making &#39;psi&#39; ids contiguous
computing largest connected set (how=None)
sorting columns
resetting index
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>i</th>
      <th>j</th>
      <th>y</th>
      <th>t</th>
      <th>m</th>
      <th>alpha</th>
      <th>k</th>
      <th>l</th>
      <th>psi</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>36</td>
      <td>-1.569165</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>2</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0</td>
      <td>17</td>
      <td>2.442324</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0</td>
      <td>17</td>
      <td>-1.307551</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0</td>
      <td>17</td>
      <td>-1.551354</td>
      <td>3</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>1</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0</td>
      <td>13</td>
      <td>-0.789661</td>
      <td>4</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>1</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>49995</th>
      <td>9999</td>
      <td>102</td>
      <td>-1.493225</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>5</td>
      <td>1</td>
      <td>4</td>
    </tr>
    <tr>
      <th>49996</th>
      <td>9999</td>
      <td>116</td>
      <td>2.368321</td>
      <td>1</td>
      <td>2</td>
      <td>1</td>
      <td>5</td>
      <td>1</td>
      <td>4</td>
    </tr>
    <tr>
      <th>49997</th>
      <td>9999</td>
      <td>76</td>
      <td>-2.070787</td>
      <td>2</td>
      <td>2</td>
      <td>1</td>
      <td>3</td>
      <td>1</td>
      <td>6</td>
    </tr>
    <tr>
      <th>49998</th>
      <td>9999</td>
      <td>23</td>
      <td>-1.203733</td>
      <td>3</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>49999</th>
      <td>9999</td>
      <td>23</td>
      <td>0.132797</td>
      <td>4</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>50000 rows × 9 columns</p>
</div></div>
</div>
<p>Here, we see what happens if we add custom columns incorrectly. In this example, we see that cleaning will raise an error. If instead, we try to bypass data cleaning and immediately convert between data formats, the custom columns will be dropped during the conversion.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bdf_long</span> <span class="o">=</span> <span class="n">bpd</span><span class="o">.</span><span class="n">BipartiteDataFrame</span><span class="p">(</span>
    <span class="n">i</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;i&#39;</span><span class="p">],</span> <span class="n">j</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;j&#39;</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">],</span> <span class="n">t</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;t&#39;</span><span class="p">],</span>
    <span class="n">l</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;l&#39;</span><span class="p">],</span> <span class="n">k</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;k&#39;</span><span class="p">]</span>
<span class="p">)</span>
<span class="n">bdf_long</span><span class="p">[</span><span class="s1">&#39;alpha&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;alpha&#39;</span><span class="p">]</span>
<span class="n">bdf_long</span><span class="p">[</span><span class="s1">&#39;psi&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;psi&#39;</span><span class="p">]</span>
<span class="n">bdf_long</span> <span class="o">=</span> <span class="n">bdf_long</span><span class="o">.</span><span class="n">clean</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
checking required columns and datatypes
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">ValueError</span>                                Traceback (most recent call last)
Input <span class="ansi-green-fg">In [9]</span>, in <span class="ansi-cyan-fg">&lt;cell line: 7&gt;</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-intense-fg ansi-bold">      5</span> bdf_long[<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">alpha</span><span style="color: rgb(175,0,0)">&#39;</span>] <span style="color: rgb(98,98,98)">=</span> df[<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">alpha</span><span style="color: rgb(175,0,0)">&#39;</span>]
<span class="ansi-green-intense-fg ansi-bold">      6</span> bdf_long[<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">psi</span><span style="color: rgb(175,0,0)">&#39;</span>] <span style="color: rgb(98,98,98)">=</span> df[<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">psi</span><span style="color: rgb(175,0,0)">&#39;</span>]
<span class="ansi-green-fg">----&gt; 7</span> bdf_long <span style="color: rgb(98,98,98)">=</span> bdf_long<span style="color: rgb(98,98,98)">.</span>clean()

File <span class="ansi-green-fg">~/opt/anaconda3/envs/stata-env/lib/python3.9/site-packages/bipartitepandas/bipartitelong.py:129</span>, in <span class="ansi-cyan-fg">BipartiteLong.clean</span><span class="ansi-blue-fg">(self, params)</span>
<span class="ansi-green-intense-fg ansi-bold">    126</span>     params[<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">connectedness</span><span style="color: rgb(175,0,0)">&#39;</span>] <span style="color: rgb(98,98,98)">=</span> <span class="ansi-bold" style="color: rgb(0,135,0)">None</span>
<span class="ansi-green-intense-fg ansi-bold">    128</span> <span style="color: rgb(95,135,135)">## Initial cleaning ##</span>
<span class="ansi-green-fg">--&gt; 129</span> frame <span style="color: rgb(98,98,98)">=</span> <span class="ansi-yellow-bg" style="color: rgb(0,135,0)">super</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">)</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">clean</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">params</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    131</span> <span class="ansi-bold" style="color: rgb(0,135,0)">if</span> collapse:
<span class="ansi-green-intense-fg ansi-bold">    132</span>     <span style="color: rgb(95,135,135)">## Collapse then compute largest connected set ##</span>
<span class="ansi-green-intense-fg ansi-bold">    133</span>     <span style="color: rgb(95,135,135)"># Update parameters</span>
<span class="ansi-green-intense-fg ansi-bold">    134</span>     level_dict <span style="color: rgb(98,98,98)">=</span> {
<span class="ansi-green-intense-fg ansi-bold">    135</span>         <span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">leave_out_spell</span><span style="color: rgb(175,0,0)">&#39;</span>: <span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">spell</span><span style="color: rgb(175,0,0)">&#39;</span>,
<span class="ansi-green-intense-fg ansi-bold">    136</span>         <span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">leave_out_match</span><span style="color: rgb(175,0,0)">&#39;</span>: <span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">match</span><span style="color: rgb(175,0,0)">&#39;</span>
<span class="ansi-green-intense-fg ansi-bold">    137</span>     }

File <span class="ansi-green-fg">~/opt/anaconda3/envs/stata-env/lib/python3.9/site-packages/bipartitepandas/bipartitelongbase.py:104</span>, in <span class="ansi-cyan-fg">BipartiteLongBase.clean</span><span class="ansi-blue-fg">(self, params)</span>
<span class="ansi-green-intense-fg ansi-bold">    102</span> <span class="ansi-bold" style="color: rgb(0,135,0)">if</span> verbose:
<span class="ansi-green-intense-fg ansi-bold">    103</span>     tqdm<span style="color: rgb(98,98,98)">.</span>write(<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">checking required columns and datatypes</span><span style="color: rgb(175,0,0)">&#39;</span>)
<span class="ansi-green-fg">--&gt; 104</span> <span class="ansi-yellow-bg">frame</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">_check_cols</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    106</span> <span style="color: rgb(95,135,135)"># Next, sort rows</span>
<span class="ansi-green-intense-fg ansi-bold">    107</span> <span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>log(<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">sorting rows</span><span style="color: rgb(175,0,0)">&#39;</span>, level<span style="color: rgb(98,98,98)">=</span><span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">info</span><span style="color: rgb(175,0,0)">&#39;</span>)

File <span class="ansi-green-fg">~/opt/anaconda3/envs/stata-env/lib/python3.9/site-packages/bipartitepandas/bipartitebase.py:1196</span>, in <span class="ansi-cyan-fg">BipartiteBase._check_cols</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">   1194</span> error_msg <span style="color: rgb(98,98,98)">=</span> <span style="color: rgb(175,0,0)">f</span><span style="color: rgb(175,0,0)">&#34;</span><span class="ansi-bold" style="color: rgb(175,95,135)">{</span>col<span class="ansi-bold" style="color: rgb(175,95,135)">}</span><span style="color: rgb(175,0,0)"> is included in the dataframe but is not saved in .col_reference_dict. Please initialize your BipartiteBase object to include this column by setting </span><span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">col_reference_dict=your_col_reference_dict</span><span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">.</span><span style="color: rgb(175,0,0)">&#34;</span>
<span class="ansi-green-intense-fg ansi-bold">   1195</span> <span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>log(error_msg, level<span style="color: rgb(98,98,98)">=</span><span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">info</span><span style="color: rgb(175,0,0)">&#39;</span>)
<span class="ansi-green-fg">-&gt; 1196</span> <span class="ansi-bold" style="color: rgb(0,135,0)">raise</span> <span class="ansi-bold" style="color: rgb(215,95,95)">ValueError</span>(error_msg)

<span class="ansi-red-fg">ValueError</span>: alpha is included in the dataframe but is not saved in .col_reference_dict. Please initialize your BipartiteBase object to include this column by setting &#39;col_reference_dict=your_col_reference_dict&#39;.
</pre></div></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="formats.html" class="btn btn-neutral float-left" title="Formats" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="clustering.html" class="btn btn-neutral float-right" title="Clustering" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Thibaut Lamadon.
      <span class="lastupdated">Last updated on Jul 24, 2023.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>